<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scalable Real-Time Chat Application - System Design</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 30px;
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 40px;
            font-size: 2.5em;
            font-weight: 300;
        }
        
        .architecture {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .layer {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            border-left: 5px solid;
            position: relative;
        }
        
        .client-layer { border-left-color: #3498db; }
        .load-balancer-layer { border-left-color: #e74c3c; }
        .websocket-layer { border-left-color: #f39c12; }
        .backend-layer { border-left-color: #27ae60; }
        .queue-layer { border-left-color: #9b59b6; }
        .database-layer { border-left-color: #34495e; }
        
        .layer-title {
            font-size: 1.4em;
            font-weight: 600;
            margin-bottom: 20px;
            color: #2c3e50;
        }
        
        .components {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .component {
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border: 2px solid transparent;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .component:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }
        
        .client { border-color: #3498db; }
        .load-balancer { border-color: #e74c3c; }
        .websocket { border-color: #f39c12; }
        .backend { border-color: #27ae60; }
        .queue { border-color: #9b59b6; }
        .database { border-color: #34495e; }
        .storage { border-color: #16a085; }
        
        .component-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .component-desc {
            font-size: 0.9em;
            color: #7f8c8d;
            line-height: 1.4;
        }
        
        .data-flow {
            background: #ecf0f1;
            border-radius: 12px;
            padding: 25px;
            margin-top: 30px;
        }
        
        .flow-title {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 15px;
            color: #2c3e50;
        }
        
        .flow-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .flow-step {
            background: white;
            border-radius: 8px;
            padding: 15px;
            border-left: 4px solid #3498db;
            position: relative;
        }
        
        .step-number {
            background: #3498db;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
            font-weight: 600;
            position: absolute;
            top: -10px;
            left: -15px;
        }
        
        .arrow {
            position: absolute;
            right: -20px;
            top: 50%;
            transform: translateY(-50%);
            color: #3498db;
            font-size: 1.5em;
        }
        
        .tech-stack {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            margin-top: 30px;
        }
        
        .tech-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .tech-category {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .tech-category h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }
        
        .tech-list {
            list-style: none;
            padding: 0;
        }
        
        .tech-list li {
            padding: 5px 0;
            color: #7f8c8d;
            border-bottom: 1px solid #ecf0f1;
        }
        
        .tech-list li:last-child {
            border-bottom: none;
        }
        
        .scalability-features {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 12px;
            padding: 25px;
            margin-top: 30px;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .feature {
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 15px;
            backdrop-filter: blur(10px);
        }
        
        .feature h4 {
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .metrics {
            background: #2c3e50;
            color: white;
            border-radius: 12px;
            padding: 25px;
            margin-top: 30px;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .metric {
            text-align: center;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
        }
        
        .metric-value {
            font-size: 2em;
            font-weight: 600;
            color: #3498db;
        }
        
        .metric-label {
            font-size: 0.9em;
            opacity: 0.8;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Scalable Real-Time Chat Application</h1>
        <p style="text-align: center; color: #7f8c8d; font-size: 1.1em; margin-bottom: 40px;">
            System Architecture for High-Performance Messaging Platform
        </p>
        
        <div class="architecture">
            <!-- Client Layer -->
            <div class="layer client-layer">
                <div class="layer-title">üñ•Ô∏è Client Layer</div>
                <div class="components">
                    <div class="component client">
                        <div class="component-title">Mobile Apps</div>
                        <div class="component-desc">iOS/Android native apps with WebSocket connections for real-time messaging</div>
                    </div>
                    <div class="component client">
                        <div class="component-title">Web Clients</div>
                        <div class="component-desc">React/Vue.js SPAs with Socket.IO for browser-based chat interface</div>
                    </div>
                    <div class="component client">
                        <div class="component-title">Desktop Apps</div>
                        <div class="component-desc">Electron-based desktop applications for cross-platform support</div>
                    </div>
                </div>
            </div>
            
            <!-- Load Balancer Layer -->
            <div class="layer load-balancer-layer">
                <div class="layer-title">‚öñÔ∏è Load Balancer Layer</div>
                <div class="components">
                    <div class="component load-balancer">
                        <div class="component-title">Application Load Balancer</div>
                        <div class="component-desc">AWS ALB/NGINX for HTTP traffic distribution with health checks</div>
                    </div>
                    <div class="component load-balancer">
                        <div class="component-title">WebSocket Load Balancer</div>
                        <div class="component-desc">HAProxy/NGINX for sticky session WebSocket routing</div>
                    </div>
                </div>
            </div>
            
            <!-- WebSocket Layer -->
            <div class="layer websocket-layer">
                <div class="layer-title">üîå WebSocket Layer</div>
                <div class="components">
                    <div class="component websocket">
                        <div class="component-title">WebSocket Handler 1</div>
                        <div class="component-desc">Node.js/Socket.IO server handling real-time connections</div>
                    </div>
                    <div class="component websocket">
                        <div class="component-title">WebSocket Handler 2</div>
                        <div class="component-desc">Horizontally scaled WebSocket servers for high availability</div>
                    </div>
                    <div class="component websocket">
                        <div class="component-title">WebSocket Handler N</div>
                        <div class="component-desc">Auto-scaling WebSocket instances based on connection load</div>
                    </div>
                </div>
            </div>
            
            <!-- Backend Services Layer -->
            <div class="layer backend-layer">
                <div class="layer-title">üîß Core Backend Services</div>
                <div class="components">
                    <div class="component backend">
                        <div class="component-title">WebSocket Manager</div>
                        <div class="component-desc">Tracks active connections, user routing, and connection state management</div>
                    </div>
                    <div class="component backend">
                        <div class="component-title">Group Service</div>
                        <div class="component-desc">Manages group creation, membership, permissions, and group metadata</div>
                    </div>
                    <div class="component backend">
                        <div class="component-title">Group Message Handler</div>
                        <div class="component-desc">Processes group messages and pushes to message queue for delivery</div>
                    </div>
                    <div class="component backend">
                        <div class="component-title">Messaging Service</div>
                        <div class="component-desc">Handles direct and group message delivery with delivery confirmations</div>
                    </div>
                    <div class="component backend">
                        <div class="component-title">Session Service</div>
                        <div class="component-desc">Tracks user login/logout, online/offline presence, and session management</div>
                    </div>
                    <div class="component backend">
                        <div class="component-title">Last Seen Service</div>
                        <div class="component-desc">Stores and retrieves user last-seen timestamps and activity status</div>
                    </div>
                    <div class="component backend">
                        <div class="component-title">Relay Service</div>
                        <div class="component-desc">Syncs messages across multiple regions for global availability</div>
                    </div>
                    <div class="component storage">
                        <div class="component-title">Asset Service</div>
                        <div class="component-desc">Handles media messages (images, audio, video) with S3 storage and CDN</div>
                    </div>
                </div>
            </div>
            
            <!-- Message Queue Layer -->
            <div class="layer queue-layer">
                <div class="layer-title">üì® Message Queue Layer</div>
                <div class="components">
                    <div class="component queue">
                        <div class="component-title">Apache Kafka</div>
                        <div class="component-desc">High-throughput message streaming for reliable, asynchronous message delivery</div>
                    </div>
                    <div class="component queue">
                        <div class="component-title">Message Topics</div>
                        <div class="component-desc">Partitioned topics for direct messages, group messages, and system events</div>
                    </div>
                    <div class="component queue">
                        <div class="component-title">Dead Letter Queue</div>
                        <div class="component-desc">Handles failed message deliveries and retry mechanisms</div>
                    </div>
                </div>
            </div>
            
            <!-- Database Layer -->
            <div class="layer database-layer">
                <div class="layer-title">üóÑÔ∏è Database Layer</div>
                <div class="components">
                    <div class="component database">
                        <div class="component-title">User-to-Group Mapping DB</div>
                        <div class="component-desc">PostgreSQL storing group memberships, roles, and permissions</div>
                    </div>
                    <div class="component database">
                        <div class="component-title">User-to-Server Mapping DB</div>
                        <div class="component-desc">Redis storing active user connections and server assignments</div>
                    </div>
                    <div class="component database">
                        <div class="component-title">User-to-Timestamp Mapping DB</div>
                        <div class="component-desc">Cassandra storing last-seen timestamps and activity logs</div>
                    </div>
                    <div class="component database">
                        <div class="component-title">Message History DB</div>
                        <div class="component-desc">MongoDB storing chat history with efficient querying and indexing</div>
                    </div>
                    <div class="component storage">
                        <div class="component-title">Object Storage (S3)</div>
                        <div class="component-desc">AWS S3 for media files with CloudFront CDN for global distribution</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Data Flow -->
        <div class="data-flow">
            <div class="flow-title">üìä Message Data Flow</div>
            <div class="flow-steps">
                <div class="flow-step">
                    <div class="step-number">1</div>
                    <strong>Client Sends Message</strong><br>
                    User sends message through mobile/web client via WebSocket connection
                    <div class="arrow">‚Üí</div>
                </div>
                <div class="flow-step">
                    <div class="step-number">2</div>
                    <strong>Load Balancer Routes</strong><br>
                    Load balancer routes to appropriate WebSocket handler based on session affinity
                    <div class="arrow">‚Üí</div>
                </div>
                <div class="flow-step">
                    <div class="step-number">3</div>
                    <strong>WebSocket Handler</strong><br>
                    WebSocket server receives message and forwards to appropriate backend service
                    <div class="arrow">‚Üí</div>
                </div>
                <div class="flow-step">
                    <div class="step-number">4</div>
                    <strong>Message Processing</strong><br>
                    Group/Direct Message Handler processes message and validates permissions
                    <div class="arrow">‚Üí</div>
                </div>
                <div class="flow-step">
                    <div class="step-number">5</div>
                    <strong>Queue Publishing</strong><br>
                    Message is published to Kafka topic for reliable delivery
                    <div class="arrow">‚Üí</div>
                </div>
                <div class="flow-step">
                    <div class="step-number">6</div>
                    <strong>Message Delivery</strong><br>
                    Messaging Service consumes from queue and delivers to recipient clients
                </div>
            </div>
        </div>
        
        <!-- Technology Stack -->
        <div class="tech-stack">
            <div class="flow-title">üõ†Ô∏è Technology Stack</div>
            <div class="tech-categories">
                <div class="tech-category">
                    <h4>Frontend Technologies</h4>
                    <ul class="tech-list">
                        <li>React.js / Vue.js for web clients</li>
                        <li>React Native / Flutter for mobile</li>
                        <li>Socket.IO client for real-time communication</li>
                        <li>Electron for desktop applications</li>
                    </ul>
                </div>
                <div class="tech-category">
                    <h4>Backend Services</h4>
                    <ul class="tech-list">
                        <li>Node.js with Express.js framework</li>
                        <li>Socket.IO for WebSocket management</li>
                        <li>Python/Go for microservices</li>
                        <li>Docker containers with Kubernetes</li>
                    </ul>
                </div>
                <div class="tech-category">
                    <h4>Message Queue & Streaming</h4>
                    <ul class="tech-list">
                        <li>Apache Kafka for message streaming</li>
                        <li>Redis for caching and pub/sub</li>
                        <li>RabbitMQ for task queues</li>
                        <li>Apache Zookeeper for coordination</li>
                    </ul>
                </div>
                <div class="tech-category">
                    <h4>Databases & Storage</h4>
                    <ul class="tech-list">
                        <li>PostgreSQL for relational data</li>
                        <li>MongoDB for message history</li>
                        <li>Cassandra for time-series data</li>
                        <li>Redis for session management</li>
                        <li>AWS S3 + CloudFront for media</li>
                    </ul>
                </div>
                <div class="tech-category">
                    <h4>Infrastructure & DevOps</h4>
                    <ul class="tech-list">
                        <li>AWS/GCP/Azure cloud platforms</li>
                        <li>Kubernetes for container orchestration</li>
                        <li>NGINX/HAProxy for load balancing</li>
                        <li>Prometheus + Grafana for monitoring</li>
                    </ul>
                </div>
                <div class="tech-category">
                    <h4>Security & Monitoring</h4>
                    <ul class="tech-list">
                        <li>JWT for authentication</li>
                        <li>OAuth 2.0 for authorization</li>
                        <li>Rate limiting with Redis</li>
                        <li>ELK stack for logging</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- Scalability Features -->
        <div class="scalability-features">
            <div class="flow-title">üöÄ Scalability & Performance Features</div>
            <div class="features-grid">
                <div class="feature">
                    <h4>Horizontal Scaling</h4>
                    <p>Auto-scaling WebSocket handlers and backend services based on load metrics</p>
                </div>
                <div class="feature">
                    <h4>Database Sharding</h4>
                    <p>Partitioned databases by user ID or group ID for distributed data storage</p>
                </div>
                <div class="feature">
                    <h4>Message Partitioning</h4>
                    <p>Kafka topic partitioning for parallel message processing and delivery</p>
                </div>
                <div class="feature">
                    <h4>CDN Integration</h4>
                    <p>Global content delivery network for media files and static assets</p>
                </div>
                <div class="feature">
                    <h4>Caching Strategy</h4>
                    <p>Multi-layer caching with Redis for frequently accessed data</p>
                </div>
                <div class="feature">
                    <h4>Regional Deployment</h4>
                    <p>Multi-region deployment with message synchronization across regions</p>
                </div>
            </div>
        </div>
        
        <!-- Performance Metrics -->
        <div class="metrics">
            <div class="flow-title">üìà Target Performance Metrics</div>
            <div class="metrics-grid">
                <div class="metric">
                    <div class="metric-value">10M+</div>
                    <div class="metric-label">Concurrent Users</div>
                </div>
                <div class="metric">
                    <div class="metric-value">< 100ms</div>
                    <div class="metric-label">Message Latency</div>
                </div>
                <div class="metric">
                    <div class="metric-value">99.9%</div>
                    <div class="metric-label">Uptime SLA</div>
                </div>
                <div class="metric">
                    <div class="metric-value">1M+</div>
                    <div class="metric-label">Messages/Second</div>
                </div>
                <div class="metric">
                    <div class="metric-value">< 50ms</div>
                    <div class="metric-label">API Response Time</div>
                </div>
                <div class="metric">
                    <div class="metric-value">99.99%</div>
                    <div class="metric-label">Message Delivery</div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
